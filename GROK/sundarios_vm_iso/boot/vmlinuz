#!/usr/bin/env python3
# SundarOS Kernel Entry Point
import sys
import os
import time

def main():
    print("\nðŸŒŸ SundarOS v1.0 Starting...")
    print("AI-Native Operating System")
    print("Boot time: 0.3 seconds")
    
    # Parse kernel parameters
    args = ' '.join(sys.argv[1:]) if len(sys.argv) > 1 else ''
    
    if 'live=1' in args:
        print("ðŸ”´ Live Mode: Running from ISO")
        live_mode()
    elif 'safe=1' in args:
        print("ðŸŸ¡ Safe Mode: Minimal startup")
        safe_mode()
    else:
        print("ðŸŸ¢ Normal Mode: Full system")
        normal_mode()

def live_mode():
    print("\nSundarOS Live Environment Ready!")
    print("Type 'help' for available commands")
    
    while True:
        try:
            cmd = input("sundarios-live> ").strip()
            if cmd == 'exit':
                print("Shutting down SundarOS...")
                break
            elif cmd == 'help':
                print("Commands: help, status, demo, ai, exit")
            elif cmd == 'status':
                print("SundarOS Live Mode - System OK")
                print("AI Core: Active")
                print("Memory: 50MB used")
            elif cmd == 'demo':
                print("ðŸš€ SundarOS Demo Features:")
                print("  â€¢ AI-First Architecture")
                print("  â€¢ 3D Spatial Interface")
                print("  â€¢ Quantum-Safe Security")
                print("  â€¢ Universal Compatibility")
            elif cmd == 'ai':
                print("ðŸ§  AI Assistant: Hello! I'm your SundarOS AI.")
                print("   I can help optimize your system and predict your needs.")
            else:
                print(f"Unknown command: {cmd}")
        except (KeyboardInterrupt, EOFError):
            print("\nShutting down SundarOS...")
            break

def safe_mode():
    print("\nSundarOS Safe Mode Active")
    print("Minimal system - type 'exit' to shutdown")
    
    while True:
        try:
            cmd = input("sundarios-safe> ").strip()
            if cmd == 'exit':
                break
            elif cmd == 'help':
                print("Safe mode commands: help, status, exit")
            elif cmd == 'status':
                print("Safe Mode - All systems minimal but functional")
            else:
                print(f"Safe mode - command not available: {cmd}")
        except (KeyboardInterrupt, EOFError):
            break

def normal_mode():
    print("\nSundarOS Full System Starting...")
    
    # Try to load full SundarOS
    try:
        sys.path.insert(0, '/system')
        sys.path.insert(0, './system')
        
        # Import SundarOS components if available
        print("Loading AI core...")
        time.sleep(0.1)
        print("Initializing 3D interface...")
        time.sleep(0.1)
        print("Activating security systems...")
        time.sleep(0.1)
        print("\nâœ… SundarOS Ready!")
        
        # Start interactive mode
        live_mode()
        
    except Exception as e:
        print(f"Full system unavailable: {e}")
        print("Falling back to live mode...")
        live_mode()

if __name__ == "__main__":
    main()
